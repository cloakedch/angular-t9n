<h2>{{ (unit | async)?.id }}</h2>

<ng-container *ngIf="form | async as formGroup">
  <form [formGroup]="formGroup">
    <mat-form-field appearance="standard">
      <mat-label>Description</mat-label>
      <input matInput formControlName="description" />
    </mat-form-field>

    <mat-form-field appearance="standard">
      <mat-label>Meaning</mat-label>
      <input matInput formControlName="meaning" />
    </mat-form-field>

    <mat-form-field appearance="standard">
      <mat-label>Source</mat-label>
      <textarea matInput formControlName="source" cdkTextareaAutosize></textarea>
      <button
        type="button"
        mat-icon-button
        matSuffix
        matTooltip="Copy source to clipboard"
        (click)="copySourceToClipboard(formGroup.get('source').value)"
      >
        <mat-icon>file_copy</mat-icon>
      </button>
    </mat-form-field>

    <mat-form-field appearance="standard">
      <mat-label>Target</mat-label>
      <textarea matInput formControlName="target" cdkTextareaAutosize></textarea>
      <mat-hint *ngIf="formGroup.get('target').errors?.placeholders as placeholders"
        >Expected {{ placeholders.length }} placeholders
        <mat-icon [matTooltip]="placeholders.join('\n')" matTooltipClass="tooltip-linebreak"
          >info</mat-icon
        >
      </mat-hint>
    </mat-form-field>

    <mat-form-field appearance="standard">
      <mat-label>State</mat-label>
      <mat-select formControlName="state">
        <mat-option *ngIf="formGroup.get('state').value === 'initial'" value="initial"
          >Initial</mat-option
        >
        <mat-option value="translated">Translated</mat-option>
        <mat-option value="reviewed">Reviewed</mat-option>
        <mat-option value="final">Final</mat-option>
      </mat-select>
    </mat-form-field>
  </form>
</ng-container>

<a mat-raised-button color="primary" routerLink="../.." [queryParams]="params | async">
  <mat-icon>keyboard_backspace</mat-icon> Back
</a>
